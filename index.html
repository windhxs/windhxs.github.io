<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Mist',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="wsl">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="wsl">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="windhxs">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>wsl</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">wsl</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/23/opencv%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-16/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windhxs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wsl">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/23/opencv%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-16/" class="post-title-link" itemprop="url">opencv学习记录#16</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-23 11:50:55" itemprop="dateCreated datePublished" datetime="2020-02-23T11:50:55+08:00">2020-02-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-02-24 16:46:16" itemprop="dateModified" datetime="2020-02-24T16:46:16+08:00">2020-02-24</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="scale-space尺度空间">Scale space(尺度空间)</h2>
<p>首先要理解Scale，即尺度，我们在一定范围内才将世界上的物体视为有意义的实体。一个简单的例子是树的分支的概念，它仅在从几厘米到最大几米的范围内有意义。在纳米或公里级别上讨论树木的概念是没有意义的。在这些尺度上，谈论形成树的叶子或树生长的森林的分子更有意义。</p>
<p>一个明显的问题涉及应该在这些级别上提取哪些信息以及应该执行哪些计算。任何类型的操作可行吗？为了限制可能性空间而采用的公理方法是假定视觉处理的最开始阶段应该能够运行，而无需任何关于场景中可能存在的预期的直接知识。自然的结果是，第一个处理阶段应该不作承诺，并做出尽可能少的不可逆的决定或选择。特别是，鉴于没有合适的比例尺的先验信息，唯一合理的方法是考虑所有比例尺的表示形式。这直接引起了多尺度表示的概念。</p>
<p><strong>For an uncommitted vision system, the scale-space theory states that the natural operations of perform in a visual front-end are convolutions with Gaussian kernels and their derivatives at different scales.</strong></p>
<p><strong>A crucial requirement is that structures at coarse scales in the multiscale representation should constitute simplications of corresponding structures at ner scales —— they should not be accidental phenomena created by the smoothing method.</strong></p>
<p>所谓尺度空间就是任何类型的多尺度表示。</p>
<h3 id="早期多尺度表示方式">早期多尺度表示方式</h3>
<h4 id="四叉树">四叉树</h4>
<p>该算法的思想是用树的形式表示一个图像。假设图片形状是<span class="math inline">\(2^K × 2^K\)</span>,定义 <span class="math inline">\(\sum\)</span> 为一个区域的灰度变化。</p>
<p>令 <span class="math display">\[
f^{(K)} = f
\]</span> 预设一个阈值<span class="math inline">\(\alpha\)</span>，当 <span class="math display">\[
\sum(f^{(k)}) &gt; \alpha
\]</span></p>
<p>将<span class="math inline">\(f^{(K)}\)</span>分解为若干个子图<span class="math inline">\(f^{(K-1)}_j(j = 1..p)\)</span>。</p>
<p>这样递归进行下去，直至收敛。可以得到一个度为<span class="math inline">\(p\)</span>的树，树的每个叶子节点都有 <span class="math display">\[
\sum(f^{(k)}_j) &lt;= \alpha
\]</span></p>
<p>最差的情况是每个像素是一个叶子节点，但是如果叶子很少的画，大量的计算就可以省略掉了。</p>
<h4 id="金字塔">金字塔</h4>
<p>金字塔主要是将重采样和平滑相结合。仍然假设图片是<span class="math inline">\(2^K × 2^K\)</span></p>
<p>令 <span class="math display">\[
f^{(K)} = f
\]</span></p>
<p><span class="math display">\[
{f^{(k-1)}=\operatorname{REDUCE}\left(f^{(k)}\right)} 
\]</span></p>
<p><span class="math display">\[ 
{f^{(k-1)}(x)=\sum_{n=-N}^{N} c(n) f^{(k)}(2 x-n)}
\]</span></p>
<p>其中<span class="math inline">\(c: \mathbb{Z} \rightarrow \mathbb{R}\)</span>表示滤波器</p>
<p>金字塔表示的优势在于图像的大小指数级的降低</p>
<h4 id="其他以后填坑">其他以后填坑</h4>
<h2 id="sift">SIFT</h2>
<p>SIFT 算法流程为</p>
<ul>
<li>尺度空间极值检测(Scale-space extrema detection)：搜索所有尺度上的图像位置。通过高斯微分函数来识别潜在的对于尺度和旋转不变的兴趣点。</li>
<li>关键点定位(Scale-space extrema detection)：在每个候选的位置上，通过一个拟合精细的模型来确定位置和尺度。关键点的选择依据于它们的稳定程度。</li>
<li>方向确定(Orientation assignment)：基于图像局部的梯度方向，分配给每个关键点位置一个或多个方向。所有后面的对图像数据的操作都相对于关键点的方向、尺度和位置进行变换，从而提供对于这些变换的不变性。</li>
<li>关键点描述(Orientation assignment)：在每个关键点周围的邻域内，在选定的尺度上测量图像局部的梯度。这些梯度被变换成一种表示，这种表示允许比较大的局部形状的变形和光照变化。</li>
</ul>
<p>一个图像的尺度空间(scale space)定义为一系列的高斯卷积核和原图像的卷积： <span class="math display">\[
L(x, y, \sigma)=G(x, y, \sigma_i) * I(x, y)
\]</span></p>
<p>其中G是高斯核 <span class="math display">\[
G(x, y, \sigma)=\frac{1}{2 \pi \sigma^{2}} e^{-\left(x^{2}+y^{2}\right) / 2 \sigma^{2}}
\]</span></p>
<p>高斯差分(difference-of-Gaussian)</p>
<p><span class="math display">\[
\begin{aligned} D(x, y, \sigma) &amp;=(G(x, y, k \sigma)-G(x, y, \sigma)) * I(x, y) \\ &amp;=L(x, y, k \sigma)-L(x, y, \sigma) \end{aligned}
\]</span></p>
<p>而高斯差分是尺度归一化高斯-拉普拉斯的近似表示</p>
<p><span class="math display">\[
\frac{\partial G}{\partial \sigma}=\sigma \nabla^{2} G
\]</span> 因此 <span class="math display">\[
\sigma \nabla^{2} G=\frac{\partial G}{\partial \sigma} \approx \frac{G(x, y, k \sigma)-G(x)}{k \sigma-\sigma}
\]</span> <span class="math display">\[
G(x, y, k \sigma)-G(x, y, \sigma) \approx(k-1) \sigma^{2} \nabla^{2} G
\]</span></p>
<h3 id="构建尺度空间">构建尺度空间</h3>
<p>需要确定两个量 - Octave 高斯金字塔的组数 - S 组内层数</p>
<p>通常输入的图像已经经过了<span class="math inline">\(\sigma_n = 0.5\)</span>的高斯平滑，所以不能用<span class="math inline">\(\sigma_{0}\)</span>的高斯滤波器平滑，而是应该用<span class="math inline">\(\sqrt{\sigma_{0}^{2}-\sigma_{n}^{2}}\)</span>的高斯滤波器平滑， <span class="math display">\[
\text {FirstLayer }(x, y)=I(x, y) \otimes G(x, y, \sqrt{\sigma_{0}^{2}-\sigma_{n}^{2}})
\]</span></p>
<p><span class="math inline">\(\sigma_{0}\)</span>一般取1.6</p>
<p>S是用来寻找特征点的高斯差分图像，特征点的寻找需要查找的是空间局部极小值，因此，需要查找S层的特征点，需要S+2层高斯差分图像，然后查找其中的第2层到第S+1层，又需要S+3层图像来构建出来S+2层高斯差分图像。</p>
<p>所以，如果整个尺度空间一共有O组，每组有S+3层图像。共O*(S+3)张尺度图像</p>
<p>检测点和它同尺度的8个相邻点和上下相邻尺度对应的9×2个点共26个点比较，以确保在尺度空间和二维图像空间都检测到极值点。</p>
<p>取上一组的倒数第3张图像隔行采样后作为下一组的第一张图像。</p>
<p>假设在<span class="math inline">\((x,y,\sigma)\)</span>处检测到了极值，但是由于图像是离散的，无法精确判断位置，将<span class="math inline">\(D(\Delta x, \Delta y, \Delta \sigma)\)</span>在<span class="math inline">\((x,y,\sigma)\)</span>展开，得到，</p>
<p><span class="math display">\[
D(\Delta x, \Delta y, \Delta \sigma)=D(x, y, \sigma)+\left[\begin{array}{ccc}{\frac{\partial D}{x}} &amp; {\frac{\partial D}{\partial}} &amp; {\frac{\partial D}{\sigma}}\end{array}\right]\left[\begin{array}{c}{\Delta x} \\ {\Delta y} \\ {\Delta \sigma}\end{array}\right]+\frac{1}{2}\left[\begin{array}{cccc}{\Delta x} &amp; {\Delta y} &amp; {\Delta \sigma}\end{array}\right]\left[\begin{array}{ccc}{\frac{\partial^{2} D}{\partial x^{2}}} &amp; {\frac{\partial^{2} D}{\partial x \partial y}} &amp; {\frac{\partial^{2} D}{\partial x \partial \sigma}} \\ {\frac{\partial^{2} D}{\partial y^{2}}} &amp; {\frac{\partial^{2} D}{\partial x^{2}}} &amp; {\frac{\partial^{2} D}{\partial x^{2}}} \\ {\frac{\partial^{2} D}{\partial \sigma_{2 x}}} &amp; {\frac{\partial^{2} D}{\partial \sigma^{2}}} &amp; {\frac{\partial^{2} D}{\partial \sigma^{2}}}\end{array}\right]\left[\begin{array}{c}{\Delta x} \\ {\Delta y} \\ {\Delta \sigma}\end{array}\right]
\]</span></p>
<p>即 <span class="math display">\[
D(x)=D+\frac{\partial D^{T}}{\partial x} \Delta x+\frac{1}{2} \Delta x^{T} \frac{\partial^{2} D^{T}}{\partial x^{2}} \Delta x
\]</span></p>
<p>令一阶导数为零，得到</p>
<p><span class="math display">\[
\Delta x=-\frac{\partial^{2} D^{-1}}{\partial x^{2}} \frac{\partial D(x)}{\partial x}
\]</span></p>
<p>由于DoG对图像中的边缘有比较强的响应值，而一旦特征点落在图像的边缘上，这些点就是不稳定的点。一方面图像边缘上的点是很难定位的，具有定位歧义性；另一方面这样的点很容易受到噪声的干扰而变得不稳定。所以需要删除边缘效应。</p>
<p>一个平坦的DoG响应峰值往往在横跨边缘的地方有较大的主曲率，而在垂直边缘的方向有较小的主曲率。而主曲率可以通过2×2的Hessian矩阵<span class="math inline">\(H\)</span>求出：</p>
<p><span class="math display">\[
\mathbf{H}=\left[\begin{array}{cc}{D_{x x}} &amp; {D_{x y}} \\ {D_{x y}} &amp; {D_{y y}}\end{array}\right]
\]</span> <span class="math inline">\(D\)</span>值可以通过求取邻近点像素的差分得到。<span class="math inline">\(𝐻\)</span>的特征值与𝐷的主曲率成正比例。我们可以避免求取具体的特征值，因为我们只关心特征值的比例。令<span class="math inline">\(\alpha=\lambda_{max}\)</span>为最大的特征值，<span class="math inline">\(\beta=\lambda_{min}\)</span>为最小的特征值，那么，我们通过𝐻矩阵直迹计算它们的和，通过𝐻矩阵的行列式计算它们的乘积</p>
<p><span class="math display">\[
\begin{aligned} \operatorname{Tr}(\mathbf{H}) &amp;=D_{x x}+D_{y y}=\alpha+\beta \\ \operatorname{Det}(\mathbf{H}) &amp;=D_{x x} D_{y y}-\left(D_{x y}\right)^{2}=\alpha \beta \end{aligned}
\]</span></p>
<p>令<span class="math inline">\(\gamma\)</span>最大特征值与最小特征值之间的比例，<span class="math inline">\(\alpha =\gamma \times \beta\)</span>，则</p>
<p><span class="math display">\[
\frac{\operatorname{Tr}(H)^{2}}{\operatorname{Det}(H)}=\frac{(\alpha+\beta)^{2}}{\alpha \beta}=\frac{(\gamma+1)^{2}}{\gamma}
\]</span> 所以要想检查主曲率的比例小于某一阈值𝛾，只要检查下式是否成立： <span class="math display">\[
\frac{\operatorname{Tr}(H)^{2}}{\operatorname{Det}(H)}&lt;\frac{(\gamma+1)^{2}}{\gamma}
\]</span></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/22/%E5%9B%BE%E5%83%8F%E6%A2%AF%E5%BA%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windhxs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wsl">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/22/%E5%9B%BE%E5%83%8F%E6%A2%AF%E5%BA%A6/" class="post-title-link" itemprop="url">图像梯度</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-02-22 22:37:27 / Modified: 22:58:35" itemprop="dateCreated datePublished" datetime="2020-02-22T22:37:27+08:00">2020-02-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>图片的梯度决定了图片是如何改变的，大小决定了改变的速度，方向决定了改变的方向。</p>
<p>定义图片的梯度为</p>
<p><span class="math display">\[
\nabla I=\left(\frac{\partial I}{\partial x}, \frac{\partial I}{\partial y}\right)
\]</span></p>
<p><span class="math inline">\(I\)</span>为像素值</p>
<p>对于连续函数<span class="math inline">\(I(x,y)\)</span>，对于<span class="math inline">\(x\)</span>的偏导数为</p>
<p><span class="math display">\[
\frac{\partial I(x, y)}{\partial x}=\lim _{\Delta x \rightarrow 0} \frac{I(x+\Delta x, y)-I(x, y)}{\Delta x}
\]</span></p>
<p>由于图片像素是离散的，计算图片中的<span class="math inline">\((x,y)\)</span>处的偏导数时，可以取<span class="math inline">\((x,y)\)</span>和前一个点或者后一个点，或者取前后两个点,则</p>
<p><span class="math display">\[
\frac{\partial I(x, y)}{\partial x} \approx \frac{I(x+1, y)-I(x-1, y)}{2}
\]</span></p>
<p><span class="math display">\[
\frac{\partial I(x, y)}{\partial y} \approx \frac{I(x, y+1)-I(x, y+1)}{2}
\]</span></p>
<p>当移动的方向是任意的时候<span class="math inline">\((x,y)\)</span>,移向$ (x+, y+) <span class="math inline">\(,\)</span>$是很小的数，则 <span class="math display">\[
\begin{aligned} I(x+\Delta \cos \theta, y+\Delta \sin \theta) &amp; \approx I(x+\Delta \cos \theta, y)+\Delta \sin \theta \frac{\partial I(x, y)}{\partial y} \\ &amp; \approx I(x, y)+\Delta \cos \theta \frac{\partial I(x, y)}{\partial x}+\Delta \sin \theta \frac{\partial I(x, y)}{\partial y} \end{aligned}
\]</span> 移项可得， <span class="math display">\[
I(x+\Delta \cos \theta, y+\Delta \sin \theta)-I(x, y) \approx\langle v, \nabla I\rangle
\]</span> 其中 <span class="math display">\[
v \equiv(\Delta \cos \theta, \Delta \sin \theta)
\]</span> <span class="math display">\[
\langle v, w\rangle=\|v\| w \| \cos \alpha
\]</span></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/22/opencv%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-15/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windhxs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wsl">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/22/opencv%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-15/" class="post-title-link" itemprop="url">opencv学习记录#15</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-02-22 15:57:05 / Modified: 20:35:39" itemprop="dateCreated datePublished" datetime="2020-02-22T15:57:05+08:00">2020-02-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="哈里斯角落检测harris-corner-detection">哈里斯角落检测(Harris Corner Detection)</h2>
<p><span class="math display">\[
E(u, v)=\sum_{x, y} \underbrace{w(x, y)}_{\text {window function }}[\underbrace{I(x+u, y+v)}_{\text {shifted intensity }}-\underbrace{I(x, y)}_{\text {intensity }}]^{2}
\]</span></p>
<p>window function —— 高斯函数 即 <span class="math display">\[
w_{u,v}=e^{-\frac{\left(\mathrm{u}^{2}+\mathrm{v}^{2}\right)}{2\sigma^{2}} }
\]</span></p>
<p>经过化简， <span class="math display">\[
{E(u, v) \approx\left[\begin{array}{cc}{u} &amp; {v}\end{array}\right] M\left[\begin{array}{c}{u} \\ {v}\end{array}\right]} 
\]</span> <span class="math display">\[
{M=\sum_{x, y} w(x, y)\left[\begin{array}{cc}{I_{x} I_{x}} &amp; {I_{x} I_{y}} \\ {I_{x} I_{y}} &amp; {I_{y} I_{y}}\end{array}\right]}
\]</span> 其中，<span class="math inline">\(I_{x},I_y\)</span>分别表示在<span class="math inline">\(x,y\)</span>方向上的梯度</p>
<p>定义一个得分<span class="math inline">\(R\)</span>，表示为</p>
<p><span class="math display">\[
R=\operatorname{det}(M)-k(\operatorname{trace}(M))^{2}
\]</span></p>
<p>其中， <span class="math display">\[
\begin{array}{l}{\operatorname{det}(M)=\lambda_{1} \lambda_{2}} \\ {\operatorname{trace}(M)=\lambda_{1}+\lambda_{2}} \\ {\lambda_{1} \text { and } \lambda_{2} \text { 是 M 的特征值 } }\end{array}
\]</span></p>
<p>有结论 - <span class="math inline">\(|R|\)</span> 很小，并且<span class="math inline">\(\lambda_1,\lambda_2\)</span>也很小时，该区域是平地 - <span class="math inline">\(R &lt; 0\)</span>,并且<span class="math inline">\(\lambda_1 &gt;&gt; \lambda_2\)</span> 或者<span class="math inline">\(\lambda_2 &gt;&gt; \lambda_1\)</span>，该区域是边缘 - <span class="math inline">\(R\)</span>很大，<span class="math inline">\(\lambda_1,\lambda_2\)</span>两者差不多时是角落</p>
<p>在OpenCV中，使用<code>cv.cornerHarris()</code>即可实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv.cornerHarris(src, blockSize, ksize, k[, dst[, borderType]])</span><br></pre></td></tr></table></figure>
<h3 id="参数">参数</h3>
<ul>
<li>src 原图像</li>
<li>blockSize 窗口大小</li>
<li>ksize Sobel算子卷积核大小</li>
<li>k 即公式中的k</li>
<li>borderType 边缘扩张的方式</li>
</ul>
<h3 id="返回值">返回值</h3>
<p>dst</p>
<h2 id="shi-tomasi-corner-detector">Shi-Tomasi Corner Detector</h2>
<p>在<code>Harris Corner Detection</code>中，得分函数为 <span class="math display">\[
{R=\lambda_{1} \lambda_{2}-k\left(\lambda_{1}+\lambda_{2}\right)^{2}} 
\]</span> 而在<code>Shi-Tomasi Corner Detector</code>中，得分函数变为 <span class="math display">\[
{R=\min \left(\lambda_{1}, \lambda_{2}\right)}
\]</span></p>
<p>设置一个阈值<span class="math inline">\(\lambda_{min}\)</span></p>
<p>结论 - <span class="math inline">\(\lambda_1 &lt; \lambda_{min},\lambda_2 &lt; \lambda_{min}\)</span> ，该区域是平地 - <span class="math inline">\(\lambda_1 &gt; \lambda_{min},\lambda_2 &gt; \lambda_{min}\)</span> ，该区域是角落 - 否则该区域是边缘</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv.goodFeaturesToTrack(	image, maxCorners, qualityLevel, minDistance[, corners[, mask[, blockSize[, useHarrisDetector[, k]]]]])</span><br></pre></td></tr></table></figure>
<h3 id="参数-1">参数</h3>
<ul>
<li>image 原图像</li>
<li>maxCorners 最多的角落数</li>
<li>qualityLevel 判断是角落的最小情况，如当最大的角得分为1000，该参数为0.1，则得分小于100的将被去除</li>
<li>minDistance 两个角之间的最短距离（欧几里得距离）</li>
<li>mask ROI</li>
<li>blockSize 计算导数协方差矩阵的领域大小</li>
<li>useHarrisDetector 是否用Harris检测器</li>
<li>k Harris的k</li>
</ul>
<h3 id="返回值-1">返回值</h3>
<p>corners 检测到的角落</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/20/opencv%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-14/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windhxs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wsl">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/20/opencv%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-14/" class="post-title-link" itemprop="url">opencv学习记录#14</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-02-20 16:31:13 / Modified: 21:10:49" itemprop="dateCreated datePublished" datetime="2020-02-20T16:31:13+08:00">2020-02-20</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="直方图">直方图</h2>
<p>在OpenCV中绘制图片像素的直方图</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv.calcHist( images, channels, mask, histSize, ranges[, hist[, accumulate]]	)</span><br></pre></td></tr></table></figure>
<h3 id="参数">参数</h3>
<ul>
<li>images 图片集合</li>
<li>channels 集合，表示要计算的通道</li>
<li>mask 遮罩</li>
<li>histSize 矩形的个数</li>
<li>ranges 直方图范围</li>
</ul>
<h3 id="返回值">返回值</h3>
<p>hist 直方图数据，数组的形式</p>
<p>直接用 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.histogram()</span><br><span class="line"></span><br><span class="line">np.bincount()</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/12/keras%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windhxs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wsl">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/12/keras%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87/" class="post-title-link" itemprop="url">keras评价指标</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-12 16:55:50" itemprop="dateCreated datePublished" datetime="2020-02-12T16:55:50+08:00">2020-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-02-13 16:21:46" itemprop="dateModified" datetime="2020-02-13T16:21:46+08:00">2020-02-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>评价指标在<code>compile()</code>函数中通过metrics参数进行传递</p>
<h2 id="tf.keras.metrics.accuracy">tf.keras.metrics.Accuracy</h2>
<p>模型的预测准确率</p>
<p><span class="math display">\[
Acc = \frac{\sum||y[i] = y_{pred}[i]||}{total}
\]</span></p>
<h3 id="init__">__init__</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">__init__(</span><br><span class="line">    name&#x3D;&#39;accuracy&#39;,</span><br><span class="line">    dtype&#x3D;None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="参数">参数</h4>
<ul>
<li>name 名称</li>
<li>dtype 结果的类型</li>
</ul>
<h2 id="tf.keras.metrics.binaryaccuracy">tf.keras.metrics.BinaryAccuracy</h2>
<p>一般用于二分类问题</p>
<p><span class="math display">\[
y_{pred} \in  [0, 1]\\
y_{pred} = \begin{cases}
    1 , y_{pred}[i] &gt;= threshold \\ 
    0 , y_{pred}[i] &lt; threshold
\end{cases}\\
BinaryAcc = \frac{num_{match}}{total}
\]</span></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">__init__(</span><br><span class="line">    name&#x3D;&#39;binary_accuracy&#39;,</span><br><span class="line">    dtype&#x3D;None,</span><br><span class="line">    threshold&#x3D;0.5</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="参数-1">参数</h3>
<ul>
<li>name 名称</li>
<li>dtype 结果的类型</li>
<li>threshold 阈值</li>
</ul>
<h2 id="tf.keras.metrics.binarycrossentropy">tf.keras.metrics.BinaryCrossentropy</h2>
<p><span class="math display">\[
BC = -\frac{1}{n} \sum_{i}(y[i] * \log (y_{pred}[i])+(1-y[i]) * \log (1-y_{pred}[i]))
\]</span></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">__init__(</span><br><span class="line">    name&#x3D;&#39;binary_crossentropy&#39;,</span><br><span class="line">    dtype&#x3D;None,</span><br><span class="line">    from_logits&#x3D;False,</span><br><span class="line">    label_smoothing&#x3D;0</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="参数-2">参数</h3>
<ul>
<li>name 名称</li>
<li>dtype 结果的类型</li>
<li>from_logits 默认将值认为是概率</li>
<li>label_smoothing <span class="math inline">\([0,1]\)</span>之间的小数，表示用比0大一点的数表示0，比1小一点的数表示1</li>
</ul>
<h2 id="tf.keras.metrics.categoricalaccuracy">tf.keras.metrics.CategoricalAccuracy</h2>
<p><span class="math display">\[
CAcc = -\frac{1}{n*C}\sum_{i}\sum_{k}^{C} ||y[i]^{k} = y_{pred}[i]^{k}||
\]</span> <span class="math display">\[
Acc = \frac{||y[i] = y_{pred}[i]||}{total}
\]</span></p>
<h3 id="init__-1">__init__</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">__init__(</span><br><span class="line">    name&#x3D;&#39;categorical_accuracy&#39;,</span><br><span class="line">    dtype&#x3D;None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="参数-3">参数</h4>
<ul>
<li>name 名称</li>
<li>dtype 结果的类型</li>
</ul>
<h2 id="tf.keras.metrics.categoricalcrossentropy">tf.keras.metrics.CategoricalCrossentropy</h2>
<p><span class="math display">\[
\text { CEMetrics }=-\frac{1}{n} \sum_{i}\sum_{k}^{C}(y[i]^{(k)} * \log (y_{pred}[i]^{(k)}) ) 
\]</span></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">__init__(</span><br><span class="line">    name&#x3D;&#39;categorical_crossentropy&#39;,</span><br><span class="line">    dtype&#x3D;None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="参数-4">参数</h3>
<ul>
<li>name 名称</li>
<li>dtype 结果的类型</li>
</ul>
<h2 id="tf.keras.metrics.categoricalhinge">tf.keras.metrics.CategoricalHinge</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">__init__(</span><br><span class="line">    name&#x3D;&#39;categorical_hinge&#39;,</span><br><span class="line">    dtype&#x3D;None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="参数-5">参数</h3>
<ul>
<li>name 名称</li>
<li>dtype 结果的类型</li>
</ul>
<h2 id="tf.keras.metrics.cosinesimilarity">tf.keras.metrics.CosineSimilarity</h2>
<p><span class="math display">\[
\text { cos(A,B) }=\frac{A \cdot B}{\|A\|\|B\|}=\frac{\sum_{i=1}^{n} A_{i} \times B_{i}}{\sqrt{\sum_{i=1}^{n}\left(A_{i}\right)^{2}} \times \sqrt{\sum_{i=1}^{n}\left(B_{i}\right)^{2}}}\\
similarityLoss = \sum_{i}similarity(y[i],y_{pred}[i])
\]</span></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">__init__(</span><br><span class="line">    name&#x3D;&#39;cosine_similarity&#39;,</span><br><span class="line">    dtype&#x3D;None,</span><br><span class="line">    axis&#x3D;-1</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="参数-6">参数</h3>
<ul>
<li>name 名称</li>
<li>dtype 结果的类型</li>
<li>axis 计算余弦余弦相似度的轴</li>
</ul>
<h2 id="tf.keras.metrics.falsenegatives">tf.keras.metrics.FalseNegatives</h2>
<p><span class="math display">\[
FN = \sum_{i}\|y[i] = 1 \ \&amp;\ y_{pred}[i] = 0\|
\]</span></p>
<p>有threshold参数</p>
<h2 id="tf.keras.metrics.falsepositives">tf.keras.metrics.FalsePositives</h2>
<p><span class="math display">\[
FP = \sum_{i}\|y[i] = 0 \ \&amp;\ y_{pred}[i] = 1\|
\]</span></p>
<p>同样有threshold参数</p>
<h2 id="tf.keras.metrics.truenegatives">tf.keras.metrics.TrueNegatives</h2>
<p><span class="math display">\[
TN = \sum_{i}\|y[i] = 0 \ \&amp;\ y_{pred}[i] = 0\|
\]</span></p>
<p>同样有threshold参数</p>
<h2 id="tf.keras.metrics.truepositives">tf.keras.metrics.TruePositives</h2>
<p><span class="math display">\[
TN = \sum_{i}\|y[i] = 1 \ \&amp;\ y_{pred}[i] = 1\|
\]</span></p>
<p>同样有threshold参数</p>
<h2 id="tf.keras.metrics.precision">tf.keras.metrics.Precision</h2>
<p><span class="math display">\[
Precision = \frac{TP}{TP + FP}
\]</span></p>
<h2 id="tf.keras.metrics.recall">tf.keras.metrics.Recall</h2>
<p><span class="math display">\[
Recall = \frac{TP}{TP + FN}
\]</span></p>
<h2 id="tf.keras.metrics.auc">tf.keras.metrics.AUC</h2>
<p>谈AUC，就不得不说ROC(Receiver Operation Characteristic)</p>
<p>定义 <span class="math display">\[
TPR = \frac{TP}{TP + FN} = Recall
\]</span> <span class="math display">\[
FPR = \frac{FP}{FP + TN}
\]</span> ROC曲线的纵轴是TPR,横轴是FPR</p>
<p>AUC 就是该曲线和X轴的面积</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">__init__(</span><br><span class="line">    num_thresholds&#x3D;200,</span><br><span class="line">    curve&#x3D;&#39;ROC&#39;,</span><br><span class="line">    summation_method&#x3D;&#39;interpolation&#39;,</span><br><span class="line">    name&#x3D;None,</span><br><span class="line">    dtype&#x3D;None,</span><br><span class="line">    thresholds&#x3D;None,</span><br><span class="line">    multi_label&#x3D;False,</span><br><span class="line">    label_weights&#x3D;None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="参数-7">参数</h3>
<ul>
<li>num_threholds 计算的阈值数量</li>
<li>curve 曲线类型
<ul>
<li>'ROC'</li>
<li>'PR Precision-Recall曲线</li>
</ul></li>
<li>summation_method 面积累加的方法
<ul>
<li>'interpolation' 中间点的值作为高</li>
<li>'minoring' 值小的那个点作为高</li>
<li>'majoring' 值大的那个点作为高</li>
</ul></li>
<li>name 名称</li>
<li>dtype 返回值的数据类型</li>
<li>threholds 以列表的形式，自定义阈值</li>
<li>multi_label 是否有多个类别</li>
<li>label_weights 类别的权重</li>
</ul>
<h2 id="如何画roc曲线">如何画ROC曲线</h2>
<p>假设样本有m个正例，n个反例 - 先将阈值调至最大，即则所有预测均为反例，此时TPR = FPR = 0 ,在坐标原点标记一个点 - 依次将阈值改变为设定的值，分别计算TPR，和FPR，在坐标轴中标记，相邻的点连成线即可</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/12/keras%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windhxs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wsl">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/12/keras%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0/" class="post-title-link" itemprop="url">keras损失函数</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-12 14:22:56" itemprop="dateCreated datePublished" datetime="2020-02-12T14:22:56+08:00">2020-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-02-13 22:12:14" itemprop="dateModified" datetime="2020-02-13T22:12:14+08:00">2020-02-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="tf.keras.losses.binarycrossentropy">tf.keras.losses.BinaryCrossentropy</h2>
<p>二进制交叉熵损失函数</p>
<p><span class="math display">\[
y_{pred} = sigmoid(Output)
\]</span> <span class="math display">\[
\text { BCELoss }(y_{pred},y)=-\frac{1}{n} \sum_{i}(y[i] * \log (y_{pred}[i])+(1-y[i]) * \log (1-y_{pred}[i]))
\]</span> 其中， <span class="math display">\[
y[i]\in  \begin{Bmatrix}
0 &amp; 1
\end{Bmatrix}
\]</span></p>
<h3 id="init__方法">__init__方法</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">__init__(</span><br><span class="line">    from_logits&#x3D;False,</span><br><span class="line">    label_smoothing&#x3D;0,</span><br><span class="line">    reduction&#x3D;losses_utils.ReductionV2.AUTO,</span><br><span class="line">    name&#x3D;&#39;binary_crossentropy&#39;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="参数">参数</h4>
<ul>
<li>from_logits 是否将<span class="math inline">\(y_{pred}\)</span>不定义为概率，该参数为<code>True</code>时不需要对输出值进行<code>sigmoid</code>操作</li>
<li>label_smoothing 对<span class="math inline">\(y_{pred}\)</span>进行平滑操作，即趋向0.5</li>
<li>reduction 不管</li>
<li>name 名称</li>
</ul>
<h4 id="返回值">返回值</h4>
<p><code>tf.keras.losses.BinaryCrossentropy</code>对象</p>
<h3 id="call__方法">__call__方法</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">__call__(</span><br><span class="line">    y_true,</span><br><span class="line">    y_pred,</span><br><span class="line">    sample_weight&#x3D;None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="参数-1">参数</h4>
<ul>
<li>y_true 真实值</li>
<li>y_pred 预测值</li>
<li>sample_weight 对不同的batch赋不同的权重</li>
</ul>
<h4 id="返回值-1">返回值</h4>
<p>loss 损失值</p>
<h2 id="tf.keras.losses.categoricalcrossentropy">tf.keras.losses.CategoricalCrossentropy</h2>
<p>通常用于多分类问题，C为类别的个数 <span class="math display">\[
\text { CELoss }(y_{pred},y)=-\frac{1}{n} \sum_{i}\sum_{k}^{C}(y[i]^{(k)} * \log (y_{pred}[i]^{(k)}) ) 
\]</span> 其中,<span class="math inline">\(y[i]^{k}\)</span>,表示第i个样例的第k个类的实际值。</p>
<h3 id="init__方法-1">__init__方法</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">__init__(</span><br><span class="line">    from_logits&#x3D;False,</span><br><span class="line">    label_smoothing&#x3D;0,</span><br><span class="line">    reduction&#x3D;losses_utils.ReductionV2.AUTO,</span><br><span class="line">    name&#x3D;&#39;binary_crossentropy&#39;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="参数-2">参数</h4>
<ul>
<li>from_logits 是否将<span class="math inline">\(y_{pred}\)</span>不定义为概率，该参数为<code>True</code>时不需要对输出值进行<code>sigmoid</code>操作</li>
<li>label_smoothing 对<span class="math inline">\(y_{pred}\)</span>进行平滑操作，即用比0大一点的数表示0，比1小一点的数表示1</li>
<li>reduction 不管</li>
<li>name 名称</li>
</ul>
<h4 id="返回值-2">返回值</h4>
<p><code>tf.keras.losses.CategoricalCrossentropy</code>对象</p>
<h3 id="call__方法-1">__call__方法</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">__call__(</span><br><span class="line">    y_true,</span><br><span class="line">    y_pred,</span><br><span class="line">    sample_weight&#x3D;None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="参数-3">参数</h4>
<ul>
<li>y_true 真实值</li>
<li>y_pred 预测值</li>
<li>sample_weight 对不同的batch赋不同的权重</li>
</ul>
<h4 id="返回值-3">返回值</h4>
<p>loss 损失值</p>
<h2 id="tf.keras.losses.sparsecategoricalcrossentropy">tf.keras.losses.SparseCategoricalCrossentropy</h2>
<p>作用和<code>CategoricalCrossentropy</code>相同，区别在于当<span class="math inline">\(y_{true}\)</span>是<code>one-hot</code>编码是，需要<code>CategoricalCrossentropy</code>,而<span class="math inline">\(y_{true}\)</span>是整数时，选择使用<code>SparseCategoricalCrossentropy</code></p>
<h2 id="tf.keras.losses.categoricalhinge">tf.keras.losses.CategoricalHinge</h2>
<p><span class="math display">\[
{Loss = max(0,neg - pos + 1)}\\
{negsadasdasdasd = \sum_{i} y[i] * y_{pred}[i]}\\
{pos = max(1-y_{pred}[k])}
\]</span> 好像SVM loss</p>
<h3 id="init__方法-2">__init__方法</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">__init__(</span><br><span class="line">    reduction&#x3D;losses_utils.ReductionV2.AUTO,</span><br><span class="line">    name&#x3D;&#39;categorical_hinge&#39;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="参数-4">参数</h4>
<ul>
<li>reduction 不管</li>
<li>name 名称</li>
</ul>
<h4 id="返回值-4">返回值</h4>
<p><code>tf.keras.losses.CategoricalHinge</code>对象</p>
<h3 id="call__方法-2">__call__方法</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">__call__(</span><br><span class="line">    y_true,</span><br><span class="line">    y_pred,</span><br><span class="line">    sample_weight&#x3D;None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="参数-5">参数</h4>
<ul>
<li>y_true 真实值</li>
<li>y_pred 预测值</li>
<li>sample_weight 对不同的batch赋不同的权重</li>
</ul>
<h4 id="返回值-5">返回值</h4>
<p>loss 损失值 ## tf.keras.losses.CosineSimilarity</p>
<p><span class="math display">\[
\text { similarity(A,B) }=\frac{A \cdot B}{\|A\|\|B\|}=\frac{\sum_{i=1}^{n} A_{i} \times B_{i}}{\sqrt{\sum_{i=1}^{n}\left(A_{i}\right)^{2}} \times \sqrt{\sum_{i=1}^{n}\left(B_{i}\right)^{2}}}\\
similarityLoss = \sum_{i}similarity(y[i],y_{pred}[i])
\]</span> <span class="math inline">\(A_{i}\)</span>和<span class="math inline">\(B_{i}\)</span>分别代表向量<span class="math inline">\({\displaystyle A}\)</span>和<span class="math inline">\({\displaystyle B}\)</span>的各分量</p>
<p>貌似是用在文字处理方面的</p>
<h3 id="init__方法-3">__init__方法</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">__init__(</span><br><span class="line">    axis&#x3D;-1,</span><br><span class="line">    reduction&#x3D;losses_utils.ReductionV2.AUTO,</span><br><span class="line">    name&#x3D;&#39;cosine_similarity&#39;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="参数-6">参数</h4>
<ul>
<li>axis 计算余弦余弦相似度的轴</li>
<li>reduction 不管</li>
<li>name 名称</li>
</ul>
<h4 id="返回值-6">返回值</h4>
<p><code>tf.keras.losses.CosineSimilarity</code>对象 ### __call__方法 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">__call__(</span><br><span class="line">    y_true,</span><br><span class="line">    y_pred,</span><br><span class="line">    sample_weight&#x3D;None</span><br><span class="line">)</span><br></pre></td></tr></table></figure> #### 参数 - y_true 真实值 - y_pred 预测值 - sample_weight 对不同的batch赋不同的权重</p>
<h4 id="返回值-7">返回值</h4>
<p>loss 损失值</p>
<h2 id="tf.keras.losses.meansquarederror">tf.keras.losses.MeanSquaredError</h2>
<p><span class="math display">\[
MSELoss = \sum_{i} (y[i] - y_{pred}[i]) ^ 2
\]</span></p>
<p>最简单的损失函数</p>
<h3 id="init__方法-4">__init__方法</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">__init__(</span><br><span class="line">    reduction&#x3D;losses_utils.ReductionV2.AUTO,</span><br><span class="line">    name&#x3D;&#39;cosine_similarity&#39;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="参数-7">参数</h4>
<ul>
<li>reduction 不管</li>
<li>name 名称</li>
</ul>
<h4 id="返回值-8">返回值</h4>
<p><code>tf.keras.losses.MeanSquaredError</code>对象</p>
<h3 id="call__方法-3">__call__方法</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">__call__(</span><br><span class="line">    y_true,</span><br><span class="line">    y_pred,</span><br><span class="line">    sample_weight&#x3D;None</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="参数-8">参数</h4>
<ul>
<li>y_true 真实值</li>
<li>y_pred 预测值</li>
<li>sample_weight 对不同的batch赋不同的权重</li>
</ul>
<h4 id="返回值-9">返回值</h4>
<p>loss 损失值</p>
<h2 id="tf.keras.losses.meanabsoluteerror">tf.keras.losses.MeanAbsoluteError</h2>
<p><span class="math display">\[
MAELoss = \sum_{i}|y[i] - y_{pred}[i]|
\]</span></p>
<h2 id="tf.keras.losses.meanabsolutepercentageerror">tf.keras.losses.MeanAbsolutePercentageError</h2>
<p><span class="math display">\[
Loss = \sum_{i} \frac{100 * |y[i] - y_{pred}[i]|}{y[i]}
\]</span></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/11/opencv%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-13/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windhxs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wsl">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/11/opencv%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-13/" class="post-title-link" itemprop="url">opencv学习记录#13</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-11 16:29:27" itemprop="dateCreated datePublished" datetime="2020-02-11T16:29:27+08:00">2020-02-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-02-22 16:30:11" itemprop="dateModified" datetime="2020-02-22T16:30:11+08:00">2020-02-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>轮廓的一些性质</p>
<h2 id="长宽比">长宽比</h2>
<p><span class="math display">\[
\text { Aspect Ratio }=\frac{\text {Width}}{\text {Height}}
\]</span></p>
<h2 id="范围">范围</h2>
<p><span class="math display">\[
\text {Extent}=\frac{\text {Object Area}}{\text {Bounding Rectangle Area}}
\]</span> ## 坚固度 <span class="math display">\[
\text {Solidity}=\frac{\text {Contour Area}}{\text {Convex Hull Area}}
\]</span></p>
<h2 id="等效直径">等效直径</h2>
<p><span class="math display">\[
\text { Equivalent Diameter }=\sqrt{\frac{4 \times \text { Contour Area }}{\pi}}
\]</span></p>
<h2 id="方向">方向</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv.fitEllipse()</span><br></pre></td></tr></table></figure>
<h2 id="极值点">极值点</h2>
<h2 id="平均颜色平均强度">平均颜色、平均强度</h2>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/11/opencv%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-12/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windhxs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wsl">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/11/opencv%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-12/" class="post-title-link" itemprop="url">opencv学习记录#12</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-11 15:43:56" itemprop="dateCreated datePublished" datetime="2020-02-11T15:43:56+08:00">2020-02-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-02-20 16:31:42" itemprop="dateModified" datetime="2020-02-20T16:31:42+08:00">2020-02-20</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="找出图像的轮廓">找出图像的轮廓</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv.findContours(	image, mode, method[, contours[, hierarchy[, offset]]]	)</span><br></pre></td></tr></table></figure>
<h3 id="参数">参数</h3>
<ul>
<li>image 原图像, 单通道二进制图像，0像素为0，非零像素为1</li>
<li>mode 轮廓检索模式
<ul>
<li>cv.RETR_EXTERNAL 仅检索外部轮廓</li>
<li>cv.RETR_LIST 在不建立任何层次关系的情况下检索所有轮廓</li>
<li>cv.RETR_CCOMP 检索所有轮廓并将其组织为两级层次结构</li>
<li>cv.RETR_TREE 检索所有轮廓并重建嵌套轮廓的完整层次</li>
</ul></li>
<li>method
<ul>
<li>cv.CHAIN_APPROX_NONE 存储所有轮廓点</li>
<li>cv.CHAIN_APPROX_SIMPLE 压缩水平，垂直和对角线段，仅保留其端点。</li>
<li>cv.CHAIN_APPROX_TC89_L1 应用Teh-Chin逼近算法</li>
<li>cv.CHAIN_APPROX_TC89_KCOS 应用Teh-Chin逼近算法</li>
</ul></li>
<li>contours 检测到的轮廓</li>
<li>hierarchy 包含图像的拓扑信息</li>
<li>offset 每个轮廓点移动的可选偏移量 ### 返回值</li>
<li>image 如上</li>
<li>contours 如上</li>
<li>hierarchy 如上</li>
</ul>
<h2 id="画轮廓">画轮廓</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv.drawContours(	image, contours, contourIdx, color[, thickness[, lineType[, hierarchy[, maxLevel[, offset]]]]]	)</span><br></pre></td></tr></table></figure>
<h3 id="参数-1">参数</h3>
<ul>
<li>image 目标图像</li>
<li>contours 轮廓的列表</li>
<li>contourIdx 具体是哪个轮廓，如果是负数，则绘制所有轮廓</li>
<li>color 轮廓的颜色</li>
<li>thickness 轮廓的宽度，如果是负数，则绘制内轮廓</li>
<li>lineType 轮廓线的连接类型
<ul>
<li>cv.FILLED 普通线</li>
<li>cv.LINE_4 4联通的线</li>
<li>cv.LINE_8 8联通的线</li>
<li>cv.LINE_AA 抗锯齿的线</li>
</ul></li>
<li>hierarchy 有关层次结构的可选参数</li>
<li>maxlevel 轮廓嵌套层数</li>
<li>offset 轮廓的偏置</li>
</ul>
<h3 id="返回值">返回值</h3>
<ul>
<li>image 如上</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/10/opencv%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windhxs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wsl">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/10/opencv%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-11/" class="post-title-link" itemprop="url">opencv学习记录#11</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-10 16:18:36" itemprop="dateCreated datePublished" datetime="2020-02-10T16:18:36+08:00">2020-02-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-02-11 15:22:33" itemprop="dateModified" datetime="2020-02-11T15:22:33+08:00">2020-02-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="图像的矩">图像的矩</h2>
<p>对于一个二元函数<span class="math inline">\(f(x,y)\)</span>,其<span class="math inline">\((p+q)\)</span>阶矩定义为： <span class="math display">\[
M_{p q}=\int_{-\infty}^{\infty} \int_{-\infty}^{\infty} x^{p} y^{q} f(x, y) d x d y
\]</span> 对于一个图像(灰度图)，<span class="math inline">\(I(x,y)\)</span>表示<span class="math inline">\((x,y)\)</span>处的像素值，将图像的像素值考虑为概率密度函数，则其矩为 <span class="math display">\[
M_{i j}=\sum_{x} \sum_{y} x^{i} y^{j} I(x, y)
\]</span></p>
<p>图像矩有一些应用 + 在二进制图像中，图像的区域是<span class="math inline">\(M_{0 0}\)</span> + 图像的质心为<span class="math inline">\(\{\bar{x}, \bar{y}\}=\left\{\frac{M_{10}}{M_{00}}, \frac{M_{01}}{M_{00}}\right\}\)</span></p>
<h2 id="中心距">中心距</h2>
<p>定义为 <span class="math display">\[
\mu_{p q}=\int_{-\infty}^{\infty} \int_{-\infty}^{\infty}(x-\bar{x})^{p}(y-\bar{y})^{q} f(x, y) d x d y
\]</span> 其中 <span class="math display">\[
\bar{x} = \frac{M_{1 0}}{M_{0 0}}\ , \ \bar{y} = \frac{M_{0 1}}{M_{0 0}}
\]</span></p>
<p>若<span class="math inline">\(f(x,y)\)</span>是图片的话，则 <span class="math display">\[
\mu_{p q} =\sum_{x} \sum_{y}(x-\bar{x})^{p}(y-\bar{y})^{q} I(x, y)
\]</span></p>
<p>可以得到： <span class="math display">\[
\begin{array}{l}
{\mu_{00}=M_{00}} \\
{\mu_{01}=0} \\
{\mu_{10}=0} \\
{\mu_{11}=M_{11}-\bar{x} M_{01}=M_{11}-\bar{y} M_{10}} \\
{\mu_{20}=M_{20}-\bar{x} M_{10}} \\
{\mu_{21}=M_{21}-\bar{x} M_{10}} \\
{\mu_{21}=M_{21}-2 \bar{x} M_{11}-\bar{y} M_{20}+2 \bar{x}^{2} M_{10}} \\
{\mu_{12}=M_{30}-3 \bar{x} M_{20}+2 \bar{x}^{2} M_{10}} \\
{\mu_{03}=M_{03}-3 \bar{y} M_{02}+2 \bar{y}^{2} M_{01}}
\end{array}
\]</span> 同时可得,<span class="math inline">\(\mu_{pq}\)</span>和<span class="math inline">\(M_{mn}\)</span>的关系是 <span class="math display">\[
\mu_{p q}=\sum_{m}^{p} \sum_{n}^{q}\left(\begin{array}{l}
{p} \\
{m}
\end{array}\right)\left(\begin{array}{c}
{q} \\
{n}
\end{array}\right)(-\bar{x})^{(p-m)}(-\bar{y})^{(q-n)} M_{m n}
\]</span></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/10/opencv%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="windhxs">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wsl">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/10/opencv%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-10/" class="post-title-link" itemprop="url">opencv学习记录#10</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-02-10 14:39:10 / Modified: 16:18:43" itemprop="dateCreated datePublished" datetime="2020-02-10T14:39:10+08:00">2020-02-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="下采样">下采样</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv.pyrDown(	src[, dst[, dstsize[, borderType]]]	)</span><br></pre></td></tr></table></figure>
<h3 id="参数">参数</h3>
<ul>
<li>src 原图片</li>
<li>dst 返回值，生成的图片</li>
<li>dstsize 返回值大小</li>
<li>borderType 边缘填充类型
<ul>
<li>cv.BORDER_REPLICATE 填充最外层的像素值</li>
<li>cv.BORDER_REFLECT 翻转</li>
<li>cv.BORDER_WRAP 平移</li>
<li>cv.BORDER_REFLECT_101 除了最边上的像素翻转</li>
<li>cv.BORDER_TRANSPARENT</li>
</ul></li>
</ul>
<h3 id="返回值">返回值</h3>
<p>dst 生成的图片</p>
<h2 id="上采样">上采样</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv.pyrUp(	src[, dst[, dstsize[, borderType]]]	)</span><br></pre></td></tr></table></figure>
<h3 id="参数-1">参数</h3>
<ul>
<li>src 原图片</li>
<li>dst 返回值，生成的图片</li>
<li>dstsize 返回值大小</li>
<li>borderType 边缘填充类型
<ul>
<li>cv.BORDER_REFLECT_101 除了最边上的像素翻转</li>
</ul></li>
</ul>
<h3 id="返回值-1">返回值</h3>
<p>dst 生成的图片</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">windhxs</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">25</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">windhxs</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  

</body>
</html>
